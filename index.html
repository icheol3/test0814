<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì²­ì†Œë‹¹ë²ˆ ëœë¤ ì¶”ì²¨ê¸°</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-gradient-to-br from-sky-900 via-indigo-900 to-slate-900 min-h-screen flex items-center justify-center p-6">
  <div class="bg-white/10 backdrop-blur-lg rounded-2xl shadow-xl p-6 w-full max-w-3xl text-white">
    <h1 class="text-2xl font-bold mb-2 text-center">ì²­ì†Œë‹¹ë²ˆ ëœë¤ ì¶”ì²¨ê¸°</h1>
    <p class="text-center text-sm text-gray-300 mb-6">1ë²ˆë¶€í„° 30ë²ˆ ì‚¬ì´ì—ì„œ 5ëª…ì„ ì¤‘ë³µ ì—†ì´ ì¶”ì²¨í•©ë‹ˆë‹¤.</p>
    <div class="grid grid-cols-3 gap-4 mb-4">
      <input id="min" type="number" class="form-control" value="1" min="1" placeholder="ìµœì†Œ ë²ˆí˜¸" />
      <input id="max" type="number" class="form-control" value="30" min="1" placeholder="ìµœëŒ€ ë²ˆí˜¸" />
      <input id="count" type="number" class="form-control" value="5" min="1" placeholder="ì¸ì› ìˆ˜" />
    </div>
    <div class="flex gap-3 justify-center mb-6">
      <button id="drawBtn" class="btn btn-primary">ğŸ² ì¶”ì²¨</button>
      <button id="reshuffleBtn" class="btn btn-secondary">ğŸ” ë‹¤ì‹œ ì„ê¸°</button>
      <button id="resetBtn" class="btn btn-danger">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
    </div>
    <div id="result" class="flex flex-wrap gap-3 justify-center mb-6"></div>
    <div class="text-center">
      <button id="copyBtn" class="btn btn-outline-light">ğŸ“‹ ê²°ê³¼ ë³µì‚¬</button>
    </div>
  </div>

  <script>
    const $ = (sel) => document.querySelector(sel);
    const minEl = $('#min');
    const maxEl = $('#max');
    const countEl = $('#count');
    const resultEl = $('#result');
    const drawBtn = $('#drawBtn');
    const reshuffleBtn = $('#reshuffleBtn');
    const resetBtn = $('#resetBtn');
    const copyBtn = $('#copyBtn');

    let lastDraw = [];

    function validate(min, max, count) {
      if (isNaN(min) || isNaN(max) || isNaN(count)) return 'ëª¨ë“  ê°’ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.';
      if (min > max) return 'ìµœì†Œ ë²ˆí˜¸ê°€ ìµœëŒ€ ë²ˆí˜¸ë³´ë‹¤ í´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
      if (count < 1) return '1ëª… ì´ìƒ ë½‘ì•„ì•¼ í•©ë‹ˆë‹¤.';
      if (count > (max - min + 1)) return 'ë²”ìœ„ ë‚´ì—ì„œ í•´ë‹¹ ì¸ì›ìˆ˜ë¥¼ ë½‘ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
      return null;
    }

    function uniqueRandoms(min, max, count) {
      const picked = new Set();
      while (picked.size < count) {
        picked.add(Math.floor(Math.random() * (max - min + 1)) + min);
      }
      return Array.from(picked).sort((a,b)=>a-b);
    }

    function renderResult(nums) {
      resultEl.innerHTML = '';
      nums.forEach(n => {
        const pill = document.createElement('div');
        pill.className = 'bg-gradient-to-br from-cyan-400 to-blue-500 text-black font-bold rounded-full px-4 py-2 shadow-lg';
        pill.textContent = n;
        resultEl.appendChild(pill);
      });
    }

    function draw(newDraw=true) {
      const min = parseInt(minEl.value);
      const max = parseInt(maxEl.value);
      const count = parseInt(countEl.value);
      const err = validate(min, max, count);
      if (err) {
        Swal.fire({ icon: 'error', title: 'ì˜¤ë¥˜', text: err });
        return;
      }
      let nums = [];
      if (!newDraw && lastDraw.length) {
        nums = [...lastDraw].sort(() => Math.random() - 0.5);
      } else {
        nums = uniqueRandoms(min, max, count);
        lastDraw = nums;
      }
      renderResult(nums);
      Swal.fire({ icon: 'success', title: 'ì¶”ì²¨ ì™„ë£Œ!', text: `${nums.join(', ')} ë²ˆí˜¸ê°€ ë‹¹ì²¨ë˜ì—ˆìŠµë‹ˆë‹¤.` });
    }

    drawBtn.addEventListener('click', () => draw(true));
    reshuffleBtn.addEventListener('click', () => draw(false));
    resetBtn.addEventListener('click', () => {
      minEl.value = 1; maxEl.value = 30; countEl.value = 5; lastDraw = [];
      resultEl.innerHTML = '';
      Swal.fire({ icon: 'info', title: 'ì´ˆê¸°í™” ì™„ë£Œ', text: 'ì„¤ì •ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.' });
    });
    copyBtn.addEventListener('click', async () => {
      if (!lastDraw.length) {
        Swal.fire({ icon: 'warning', title: 'ë³µì‚¬ ì‹¤íŒ¨', text: 'ë¨¼ì € ì¶”ì²¨ì„ í•´ì£¼ì„¸ìš”.' });
        return;
      }
      await navigator.clipboard.writeText(lastDraw.join(', '));
      Swal.fire({ icon: 'success', title: 'ë³µì‚¬ ì™„ë£Œ', text: `${lastDraw.join(', ')} ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.` });
    });
  </script>
</body>
</html>
